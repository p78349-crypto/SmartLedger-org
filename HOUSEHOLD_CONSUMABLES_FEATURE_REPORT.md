# 생활용품 소모품 입력 기능 보고서

**작성일**: 2026-01-08  
**기능 명**: 생활용품 소모품 입력 (Household Consumables)  
**구현 파일**: 
- `lib/screens/household_consumables_screen.dart`
- `lib/screens/consumable_inventory_screen.dart`
- `lib/utils/household_consumables_utils.dart`
- `lib/services/consumable_inventory_service.dart`

---

## 📋 기능 개요

생활용품(화장지, 세면용품, 청소용품 등) 소모품을 **카테고리별로 분류**하여 체계적으로 입력하고 관리하는 기능입니다.

---

## 🎯 주요 기능

### 1️⃣ 생활용품 카테고리 (10가지)

#### 📦 화장지/일회용품 (4개)
| 품목 | 아이콘 | 기본 묶음 | 용도 |
|-----|------|---------|------|
| 두루마리 휴지 | Layers | 30개 | 화장실 필수품 |
| 미용티슈 | Face | 3개 | 휴대용 티슈 |
| 키친타월 | Kitchen | 4개 | 주방 청소 |
| 물티슈 | Texture | 10개 | 유아/외출용 |

#### 🧼 세면/위생용품 (3개)
| 품목 | 아이콘 | 기본 묶음 | 용도 |
|-----|------|---------|------|
| 비누 | Clean Hands | 4개 | 손 씻기 |
| 치약 | Brush | 3개 | 양치 |
| 샴푸 | Wash | 1개 | 머리감기 |

#### 🧹 세탁/청소용품 (2개)
| 품목 | 아이콘 | 기본 묶음 | 용도 |
|-----|------|---------|------|
| 주방세제 | Soap | 1개 | 설거지 |
| 세탁세제 | Local Laundry Service | 1개 | 빨래 |

#### 🍽️ 기타
| 품목 | 아이콘 | 기본 묶음 | 용도 |
|-----|------|---------|------|
| 냅킨 | Restaurant | 1개 | 식탁용 |

---

## 🔄 사용 흐름

```
1. 생활용품 소모품 입력 화면 진입
   ↓
2. 10개 카테고리 중 하나 선택 (그리드 형식)
   ↓
3. 선택한 항목 상세 입력 화면 이동
   ├─ 거래 타입: 지출 (자동 설정)
   ├─ 품목명: 자동 입력 (예: "두루마리 휴지")
   ├─ 대분류: 생활용품비
   ├─ 중분류: 화장지/일회용품 (또는 세면/위생용품)
   ├─ 소분류: 품목 상세명
   └─ 금액, 수량, 날짜 등 추가 정보 입력
   ↓
4. 거래 기록 저장
   ↓
5. (선택사항) 재고 관리 화면에서 재고 추적
```

---

## 🎨 UI 구조

### 화면 레이아웃

```
┌─────────────────────────────────┐
│ ← 생활용품 소모품 입력     📦    │ ← AppBar (재고 관리 버튼)
├─────────────────────────────────┤
│                                 │
│  [두루마리휴지] [미용티슈] [키친타월]  │
│   화장지/일회   화장지/일회   화장지/일회 │
│                                 │
│  [냅킨]    [비누]    [치약]     │
│ 화장지/일회   세면/위생  세면/위생    │
│                                 │
│  [샴푸]   [주방세제]  [세탁세제]  │
│  세면/위생  세탁/청소  세탁/청소   │
│                                 │
│  [물티슈]                        │
│  화장지/일회                     │
│                                 │
└─────────────────────────────────┘
```

### GridView 설정
- **열 개수**: 3개
- **간격**: 12px (수평/수직)
- **카드 비율**: 0.85

---

## 💾 데이터 구조

### HouseholdConsumableItem 모델

```dart
class HouseholdConsumableItem {
  final String name;                  // "두루마리 휴지"
  final String mainCategory;          // "생활용품비" (고정)
  final String subCategory;           // "화장지/일회용품" 또는 "세면/위생용품"
  final String? detailCategory;       // "두루마리 휴지" (상세 분류)
  final IconData icon;                // 표시 아이콘
  final double defaultBundleSize;     // 기본 묶음 크기 (30, 3, 4 등)
}
```

---

## 🎯 기능 상세

### 📍 1. 품목 선택 (HouseholdConsumablesScreen)

**위치**: `lib/screens/household_consumables_screen.dart`

**동작**:
- 10개 미리 정의된 항목을 GridView로 표시
- 각 카드는 아이콘, 품목명, 중분류를 포함
- 탭하면 거래 입력 화면으로 이동 (자동 데이터 채우기)

**코드 핵심**:
```dart
final item = HouseholdConsumablesUtils.defaultItems[index];
Navigator.of(context).pushNamed(
  AppRoutes.transactionAdd,
  arguments: TransactionAddArgs(
    accountName: accountName,
    initialTransaction: Transaction(
      description: item.name,           // "두루마리 휴지"
      mainCategory: item.mainCategory,  // "생활용품비"
      subCategory: item.subCategory,    // "화장지/일회용품"
      detailCategory: item.detailCategory,  // "두루마리 휴지"
    ),
  ),
);
```

---

### 📦 2. 재고 관리 (ConsumableInventoryScreen)

**위치**: `lib/screens/consumable_inventory_screen.dart`

**기능**:
- ✅ **재고 목록 조회**: 모든 소모품의 현재 재고 확인
- ✅ **로케이션 필터**: 위치별(거실, 주방, 욕실 등) 재고 분류
- ✅ **개수형 단위 설정**: 개수로 세는 항목 설정 (패키지, 개, 묶음 등)
- ✅ **재고 증/감**: 재고 추가/감소 기능
- ✅ **상세 정보**: 각 항목의 구입 금액, 구입 날짜, 소진 예상 일자 표시

**재고 관리 특징**:
```
로케이션 필터: [전체 ▼]
├─ 전체 (모든 재고 표시)
├─ 거실
├─ 주방
├─ 욕실
├─ 침실
└─ 기타

개수형 단위 설정: 개, 묶음, 팩, 박스
  → 이 단위는 -1 버튼이 크게 표시됨
  → 쉽게 개수 감소 가능
```

---

### 🛒 3. 쇼핑 카트 기능

**특징**:
- 재고 목록에서 구입할 항목 선택
- 쇼핑 카트에 추가 후 구입 예정
- 구입 후 자동으로 재고 업데이트

**사용 사례**:
```
1. 재고 관리 화면에서 "두루마리 휴지" 부족 확인
2. "쇼핑 카트 추가" 클릭
3. 나머지 부족 항목들 추가
4. 쇼핑 완료 후 "구입" 버튼으로 일괄 처리
5. 자동으로 재고 업데이트 및 거래 기록
```

---

## 📊 통계 및 분석

### 소비 추적

**가능한 분석**:
- 📈 월별 생활용품비 지출 추이
- 🎯 카테고리별 지출 비율 (화장지 vs 세탁용품)
- 📅 항목별 평균 소진 주기
- 💰 품목별 구입 단가 비교

**예시**:
```
두루마리 휴지 구입 기록:
- 1월 5일: 30개 12,000원 (개당 400원)
- 1월 25일: 30개 11,500원 (개당 383원)
- 2월 8일: 30개 12,500원 (개당 417원)

평균 소진 주기: 19일
월평균 비용: 12,000원
```

---

## 🔗 통합 기능

### 데이터 흐름

```
생활용품 입력
    ↓
거래 기록 생성 (TransactionType.expense)
    ↓
데이터베이스 저장
    ↓
재고 자동 추적
    ↓
월별 지출 통계 반영
    ↓
대시보드에 "생활용품비" 표시
```

### 연결된 화면들
1. **생활용품 소모품 입력** → 품목 선택
2. **거래 입력** → 상세 정보 입력 (금액, 수량, 날짜)
3. **재고 관리** → 현재 재고 확인
4. **대시보드** → 월별 생활용품비 통계
5. **비용 분석** → 카테고리별 지출 분석

---

## 💡 사용 예시

### 시나리오: 주말 생활용품 구입

```
1. 앱 실행 → 다른 페이지 → "생활용품 소모품 입력" 접근

2. 품목 선택
   - 두루마리 휴지 (30개, 12,000원) 
   - 세탁세제 (1개, 8,500원)
   - 샴푸 (1개, 15,000원)

3. 각 품목별로:
   - 금액 입력 (예: 12,000원)
   - 수량 입력 (예: 30개)
   - 구입 장소 선택 (마트, 편의점 등)
   - 날짜 확인 (오늘)
   - 저장

4. 거래 기록 완료
   ├─ 3개 항목 기록됨
   ├─ 총 지출: 35,500원
   ├─ 생활용품비 카테고리로 자동 분류
   └─ 재고에 자동 반영

5. 다음날 재고 확인
   - 재고 관리 화면 진입
   - 새로 구입한 항목들 표시
   - 로케이션별로 정리 가능
```

---

## ✨ 주요 이점

| 이점 | 설명 |
|-----|------|
| **빠른 입력** | 품목 선택 후 자동 분류로 입력 시간 단축 |
| **체계적 관리** | 카테고리별 분류로 생활용품비 관리 용이 |
| **재고 추적** | 구입 기록 자동으로 재고 반영 |
| **소비 분석** | 월별/품목별 지출 추이 파악 가능 |
| **쇼핑 계획** | 재고 부족 시 한눈에 확인 후 쇼핑 리스트 생성 |
| **예산 관리** | 생활용품비 카테고리로 예산 추적 가능 |

---

## 🎓 기술 구현

### 관련 클래스/서비스

1. **HouseholdConsumablesUtils**
   - 10개 기본 항목 정의
   - 카테고리별 분류

2. **ConsumableInventoryService**
   - 재고 CRUD 작업
   - 위치별 필터링
   - 개수형 단위 관리

3. **TransactionService**
   - 거래 기록 저장
   - 분류 정보 저장

4. **ConsumableInventoryRepository**
   - 데이터베이스 접근
   - 재고 데이터 영속성

---

## 📌 결론

**생활용품 소모품 입력 기능**은 SmartLedger의 **지출 관리 시스템**을 보완하는 중요한 기능입니다.

- 🎯 **목표**: 일상 소모품 지출을 체계적으로 기록
- ✅ **달성**: 카테고리별 분류 및 자동 입력으로 사용자 편의성 극대화
- 📊 **결과**: 월별 생활용품비 추이 파악 및 예산 관리 가능

**사용 대상**: 가계부 관리, 월간 생활비 추적, 쇼핑 계획 수립이 필요한 사용자

---

**작성자**: AI Code Assistant  
**기능 상태**: ✅ 완전 구현됨  
**통합 상태**: ✅ 전체 시스템과 통합
