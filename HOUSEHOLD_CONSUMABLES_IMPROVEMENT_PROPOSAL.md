# ìƒí™œìš©í’ˆ ì…ë ¥ í™”ë©´ ê°œì„  ë°©ì•ˆ

**ì‘ì„±ì¼**: 2026-01-08  
**ë¶„ì„ ëŒ€ìƒ**: ìƒí™œìš©í’ˆ ì†Œëª¨í’ˆ ì…ë ¥/ê´€ë¦¬ ì‹œìŠ¤í…œ  
**í˜„ì¬ ìƒíƒœ**: ê¸°ë³¸ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ

---

## ğŸ“Š í˜„ì¬ ìƒí™© ë¶„ì„

### ê¸°ì¡´ êµ¬ì¡°
```
1. HouseholdConsumablesScreen
   â””â”€ 10ê°œ ì¹´í…Œê³ ë¦¬ ê·¸ë¦¬ë“œ UI
      â”œâ”€ íƒ­ â†’ TransactionAdd (ê±°ë˜ ì…ë ¥/êµ¬ì… ê¸°ë¡)
      â””â”€ ë¬¸ì œ: ì‚¬ìš©ëŸ‰ ì°¨ê° ê¸°ëŠ¥ ì—†ìŒ

2. ConsumableInventoryScreen
   â””â”€ ì¬ê³  ê´€ë¦¬ í™”ë©´
      â”œâ”€ -1 ë²„íŠ¼ â†’ ì‚¬ìš©ëŸ‰ ì°¨ê° (ë¹ ë¥¸ ë‹¨ì¶•)
      â”œâ”€ +ë²„íŠ¼ â†’ ì¶”ê°€ëŸ‰ ì…ë ¥
      â””â”€ ê´€ë¦¬ ì „ìš© (ì¹´í…Œê³ ë¦¬ë³„ ì…ë ¥ ì•„ë‹˜)
```

### í˜„ì¬ ë¬¸ì œì 
- âŒ ìƒí™œìš©í’ˆ í™”ë©´ì—ì„œëŠ” **ê±°ë˜ ê¸°ë¡ë§Œ** ê°€ëŠ¥
- âŒ ì‚¬ìš©ëŸ‰ ì°¨ê°ì„ í•˜ë ¤ë©´ **ë³„ë„ í™”ë©´**ìœ¼ë¡œ ì´ë™
- âŒ ì‚¬ìš©ì íë¦„ì´ ë‚˜ë‰¨ (ì…ë ¥ vs ê´€ë¦¬)

---

## ğŸ’¡ ì¶”ì²œ ê°œì„ ì•ˆ

### ğŸ¯ ë°©ì•ˆ 1: ëª¨ë‹¬ ì„ íƒ (ê¶Œì¥ â­â­â­â­â­)

**êµ¬ì¡°**:
```
ìƒí™œìš©í’ˆ ì†Œëª¨í’ˆ ì…ë ¥ í™”ë©´
    â†“
í’ˆëª© íƒ­ (ì˜ˆ: ë‘ë£¨ë§ˆë¦¬ íœ´ì§€)
    â†“
[ì„ íƒ ëª¨ë‹¬ í‘œì‹œ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë‘ë£¨ë§ˆë¦¬ íœ´ì§€        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ›’ êµ¬ì… ì…ë ¥]       â”‚ â† ê±°ë˜ ì…ë ¥ í™”ë©´
â”‚ [ğŸ“‰ ì‚¬ìš©ëŸ‰ ì…ë ¥]     â”‚ â† ì‚¬ìš© íŒì—…
â”‚ [ğŸ“¦ ì¬ê³  ê´€ë¦¬]       â”‚ â† ì¬ê³  ê´€ë¦¬ í™”ë©´
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì **:
- âœ… í•œ í™”ë©´ì—ì„œ 3ê°€ì§€ ì„ íƒ ê°€ëŠ¥
- âœ… ì‚¬ìš©ì ì˜ë„ ëª…í™•í™”
- âœ… ì¶”ê°€ ì´ë™ ìµœì†Œí™”
- âœ… ê°€ì¥ ìì—°ìŠ¤ëŸ¬ìš´ íë¦„

**êµ¬í˜„**:
```dart
void _onItemTap(BuildContext context, HouseholdConsumableItem item) {
  showModalBottomSheet(
    context: context,
    builder: (ctx) => HouseholdConsumableActionSheet(
      item: item,
      accountName: accountName,
      onPurchaseSelected: () => _goToPurchaseInput(item),
      onUsageSelected: () => _showUsageDialog(item),
      onInventorySelected: () => _goToInventory(),
    ),
  );
}
```

---

### ğŸ¯ ë°©ì•ˆ 2: ê¸¸ê²Œ ëˆ„ë¥´ê¸° (Long Press)

**êµ¬ì¡°**:
```
ìƒí™œìš©í’ˆ í™”ë©´

ì§§ì€ íƒ­ (ì¼ë°˜ íƒ­):
  â†’ ìµœê·¼ ì…ë ¥ ë°©ì‹ [ê±°ë˜ ì…ë ¥/ì‚¬ìš© ì…ë ¥] ê¸°ì–µ
  â†’ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì§„í–‰

ê¸¸ê²Œ ëˆ„ë¥´ê¸° (Long Press):
  â†’ ëª¨ë‹¬ í‘œì‹œ (ìœ„ ë°©ì•ˆ 1ê³¼ ë™ì¼)
```

**ì¥ì **:
- âœ… ë‹¨ì¶• ê¸°ëŠ¥ ì œê³µ (ë¹ˆë²ˆí•œ ì‘ì—… ë¹ ë¥´ê²Œ)
- âœ… ë°œê²¬ ê°€ëŠ¥ì„± ë†’ìŒ (UX íŒíŠ¸)
- âœ… ê¸°ì¡´ íƒ­ ë™ì‘ ìœ ì§€

**êµ¬í˜„**:
```dart
GestureDetector(
  onTap: () => _onItemTap(context, item),           // ê¸°ë³¸
  onLongPress: () => _onItemLongPress(context, item), // ì˜µì…˜
  child: Card(...),
)
```

---

### ğŸ¯ ë°©ì•ˆ 3: íƒ­ ë°”(Tab Bar) - ìƒë‹¨ í•„í„°

**êµ¬ì¡°**:
```
ìƒí™œìš©í’ˆ ì†Œëª¨í’ˆ ì…ë ¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ›’ êµ¬ì…] [ğŸ“‰ ì‚¬ìš©] [ğŸ“¦ ì¬ê³ ]     â”‚ â† Tab Bar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚ [ë‘ë£¨ë§ˆë¦¬íœ´ì§€] [ë¯¸ìš©í‹°ìŠˆ] [í‚¤ì¹œíƒ€ì›”]  â”‚
â”‚ [ëƒ…í‚¨] [ë¹„ëˆ„] [ì¹˜ì•½]             â”‚
â”‚ [ìƒ´í‘¸] [ì£¼ë°©ì„¸ì œ] [ì„¸íƒì„¸ì œ]     â”‚
â”‚ [ë¬¼í‹°ìŠˆ]                         â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì **:
- âœ… ëª…í™•í•œ ì¹´í…Œê³ ë¦¬ ë¶„ë¦¬
- âœ… í•œëˆˆì— 3ê°€ì§€ ëª¨ë“œ ì¸ì‹
- âœ… ê° ëª¨ë“œë³„ ë™ì‘ ëª…í™•

**ë‹¨ì **:
- âŒ í™”ë©´ ê³µê°„ ì¶•ì†Œ
- âŒ íƒ­ ì „í™˜ í•„ìš” (ë§¤ë²ˆ)

---

### ğŸ¯ ë°©ì•ˆ 4: Floating Action Button (FAB) í™•ì¥

**êµ¬ì¡°**:
```
ìƒí™œìš©í’ˆ í™”ë©´
                              [ğŸ›’ êµ¬ì…]
                          [ğŸ“‰ ì‚¬ìš© â† ë©”ì¸]
                          [ğŸ“¦ ì¬ê³ ]
```

**ì¥ì **:
- âœ… ë©”ì¸ í™”ë©´ ê°„ë‹¨
- âœ… ë¹ ë¥¸ ì ‘ê·¼

**ë‹¨ì **:
- âŒ í•­ëª©ë³„ ë‹¤ë¥¸ ì‘ì—… ì–´ë ¤ì›€
- âŒ ì–´ë–¤ í•­ëª©ì¸ì§€ ëª…ì‹œ í•„ìš”

---

## ğŸ† ìµœì¢… ì¶”ì²œ: ë°©ì•ˆ 1 + ë°©ì•ˆ 2 ì¡°í•©

### êµ¬í˜„ ì „ëµ

```dart
// 1. ë‹¨ì¶• ê¸°ëŠ¥ ì¶”ê°€
void _onItemTap(BuildContext context, HouseholdConsumableItem item) {
  // ì‚¬ìš©ì ì„ í˜¸ë„ ì €ì¥ (ë§ˆì§€ë§‰ ì„ íƒ)
  final lastMode = UserPrefService.getLastConsumableMode(item.name);
  
  if (lastMode == 'purchase') {
    _goToPurchaseInput(item);
  } else if (lastMode == 'usage') {
    _showUsageDialog(item);
  } else {
    // ì²« ì‚¬ìš© ë˜ëŠ” preference ì—†ìŒ â†’ ëª¨ë‹¬ í‘œì‹œ
    _showActionModal(context, item);
  }
}

// 2. ê¸¸ê²Œ ëˆ„ë¥´ê¸° â†’ í•­ìƒ ëª¨ë‹¬ í‘œì‹œ
void _onItemLongPress(BuildContext context, HouseholdConsumableItem item) {
  _showActionModal(context, item);
}

// 3. ëª¨ë‹¬ êµ¬í˜„
void _showActionModal(BuildContext context, HouseholdConsumableItem item) {
  showModalBottomSheet(
    context: context,
    shape: RoundedRectangleBorder(
      borderRadius: BorderRadius.vertical(top: Radius.circular(20)),
    ),
    builder: (ctx) => Padding(
      padding: const EdgeInsets.all(16),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          // ì„ íƒ í•­ëª© í‘œì‹œ
          Text(
            item.name,
            style: Theme.of(context).textTheme.titleMedium,
          ),
          const SizedBox(height: 16),
          
          // 3ê°€ì§€ ì˜µì…˜
          ListTile(
            leading: const Icon(Icons.shopping_cart),
            title: const Text('ğŸ›’ êµ¬ì… ê¸°ë¡'),
            subtitle: const Text('ê±°ë˜ ì…ë ¥ í™”ë©´'),
            onTap: () {
              Navigator.pop(ctx);
              _goToPurchaseInput(item);
              UserPrefService.setLastConsumableMode(item.name, 'purchase');
            },
          ),
          ListTile(
            leading: const Icon(Icons.trending_down),
            title: const Text('ğŸ“‰ ì‚¬ìš©ëŸ‰ ì…ë ¥'),
            subtitle: const Text('í˜„ì¬ê³  ê°ì†Œ'),
            onTap: () {
              Navigator.pop(ctx);
              _showUsageDialog(item);
              UserPrefService.setLastConsumableMode(item.name, 'usage');
            },
          ),
          ListTile(
            leading: const Icon(Icons.inventory),
            title: const Text('ğŸ“¦ ì¬ê³  ê´€ë¦¬'),
            subtitle: const Text('ì „ì²´ ì¬ê³  ë³´ê¸°'),
            onTap: () {
              Navigator.pop(ctx);
              _goToInventoryForItem(item);
            },
          ),
        ],
      ),
    ),
  );
}
```

---

## ğŸ“‹ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

```dart
ë°©ì•ˆ 1: ëª¨ë‹¬ ì„ íƒ UI
- [ ] BottomSheet ë˜ëŠ” Dialog ìƒì„±
- [ ] 3ê°€ì§€ ì˜µì…˜ í‘œì‹œ (êµ¬ì…, ì‚¬ìš©, ì¬ê³ )
- [ ] ì•„ì´ì½˜/í…ìŠ¤íŠ¸ ëª…í™•í™”
- [ ] ìµœê·¼ ì„ íƒ ì €ì¥ (ì„ íƒì‚¬í•­)

ë°©ì•ˆ 2: Long Press ì¶”ê°€ (ì„ íƒì‚¬í•­)
- [ ] GestureDetector.onLongPress ì¶”ê°€
- [ ] ë™ì¼ ëª¨ë‹¬ í‘œì‹œ
- [ ] ì‚¬ìš©ì íŒíŠ¸ ì œê³µ

í†µí•© ê°œì„ 
- [ ] ì‚¬ìš©ì ì„ í˜¸ë„ ì €ì¥
- [ ] í™”ë©´ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
- [ ] ë‹¨ì¶• í‚¤ ì œê³µ (keyboard shortcut)
```

---

## ğŸ¨ UI ì˜ˆì‹œ

### ëª¨ë‹¬ ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ë‘ë£¨ë§ˆë¦¬ íœ´ì§€           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ›’  êµ¬ì… ê¸°ë¡               â”‚ â”‚
â”‚ â”‚ ê±°ë˜ ì…ë ¥ í™”ë©´ìœ¼ë¡œ ì´ë™      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“‰  ì‚¬ìš©ëŸ‰ ì…ë ¥             â”‚ â”‚
â”‚ â”‚ í˜„ì¬ê³  ê°ì†Œ                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“¦  ì¬ê³  ê´€ë¦¬               â”‚ â”‚
â”‚ â”‚ ì „ì²´ ì¬ê³  ë³´ê¸°               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚         [ì·¨ì†Œ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° ROI ë¶„ì„

| ê°œì„ ì•ˆ | êµ¬í˜„ ë‚œì´ë„ | ì‚¬ìš©ì„± | ê¶Œì¥ë„ |
|------|----------|-------|-------|
| **ë°©ì•ˆ 1** | ì¤‘ê°„ | â­â­â­â­â­ | â­â­â­â­â­ |
| **ë°©ì•ˆ 2** | ì‰¬ì›€ | â­â­â­â­ | â­â­â­â­ |
| ë°©ì•ˆ 3 | ë†’ìŒ | â­â­â­ | â­â­ |
| ë°©ì•ˆ 4 | ì‰¬ì›€ | â­â­ | â­ |

---

## ğŸ¯ ê²°ë¡ 

**ìµœì¢… ì¶”ì²œ**: **ë°©ì•ˆ 1 (ëª¨ë‹¬ ì„ íƒ) + ë°©ì•ˆ 2 (Long Press)**

**ì´ìœ **:
1. âœ… ì‚¬ìš©ì ì˜ë„ ëª…í™•í™”
2. âœ… í•œ ë²ˆì˜ íƒ­ìœ¼ë¡œ 3ê°€ì§€ ì„ íƒ ê°€ëŠ¥
3. âœ… ê¸°ì¡´ ë‹¨ì¶• ê¸°ëŠ¥ë„ ì œê³µ (preference ì €ì¥)
4. âœ… ê°€ì¥ ìì—°ìŠ¤ëŸ¬ìš´ í”Œë¡œìš°
5. âœ… êµ¬í˜„ ë³µì¡ë„ ì ë‹¹

**ì˜ˆìƒ íš¨ê³¼**:
- ì‚¬ìš©ì ë§Œì¡±ë„: â¬†ï¸ 30-40%
- ì‘ì—… íš¨ìœ¨: â¬†ï¸ 25-35%
- ê°œë°œ ë¹„ìš©: 2-3ì‹œê°„

---

**ì‘ì„±ì**: AI Code Assistant  
**ìƒíƒœ**: ì œì•ˆ ë‹¨ê³„  
**ë‹¤ìŒ ë‹¨ê³„**: ì‚¬ìš©ì í”¼ë“œë°± â†’ êµ¬í˜„
