result-view {
  match: StockCheckResult

  message {
    if (this.currentStock > 0) {
      if (exists(this.expiryDays)) {
        if (this.expiryDays <= 3) {
          template ("#{value(this.productName)}ì´(ê°€) #{value(this.currentStock)}#{value(this.unit)} ë‚¨ì•˜ì–´ìš”. âš ï¸ ìœ í†µê¸°í•œì´ #{value(this.expiryDays)}ì¼ ë‚¨ì•˜ìœ¼ë‹ˆ ë¹¨ë¦¬ ë“œì„¸ìš”!")
        } else {
          template ("#{value(this.productName)}ì´(ê°€) #{value(this.currentStock)}#{value(this.unit)} ë‚¨ì•˜ì–´ìš”. ìœ í†µê¸°í•œ #{value(this.expiryDays)}ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤.")
        }
      } else {
        template ("#{value(this.productName)}ì´(ê°€) #{value(this.currentStock)}#{value(this.unit)} ë‚¨ì•˜ì–´ìš”.")
      }
    } else {
      template ("#{value(this.productName)}ì´(ê°€) ì—†ì–´ìš”. ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€í• ê¹Œìš”?")
    }
  }

  render {
    layout {
      // ìƒí’ˆëª… í—¤ë”
      section {
        content {
          paragraph {
            value ("#{value(this.productName)}")
            style (Title_XL)
          }
        }
      }
      
      // ì¬ê³  ì •ë³´ ì¹´ë“œ
      section {
        title ("ì¬ê³  í˜„í™©")
        content {
          cell-card {
            slot1 {
              image {
                url ("/images/stock_icon.png")
                shape (Circle)
              }
            }
            slot2 {
              content {
                order (PrimarySecondary)
                primary ("í˜„ì¬ ì¬ê³ ")
                secondary ("#{value(this.currentStock)} #{value(this.unit)}")
              }
            }
          }
        }
      }
      
      // ìœ í†µê¸°í•œ ì •ë³´ (ìˆì„ ê²½ìš°)
      if (exists(this.expiryDays)) {
        section {
          title ("ìœ í†µê¸°í•œ")
          content {
            cell-card {
              slot1 {
                image {
                  if (this.expiryDays <= 3) {
                    url ("/images/warning_icon.png")
                  } else {
                    url ("/images/calendar_icon.png")
                  }
                  shape (Circle)
                }
              }
              slot2 {
                content {
                  order (PrimarySecondary)
                  if (this.expiryDays <= 0) {
                    primary ("ìœ í†µê¸°í•œ ì§€ë‚¨!")
                  } else-if (this.expiryDays <= 3) {
                    primary ("#{value(this.expiryDays)}ì¼ ë‚¨ìŒ âš ï¸")
                  } else {
                    primary ("#{value(this.expiryDays)}ì¼ ë‚¨ìŒ")
                  }
                  secondary ("ë¹¨ë¦¬ ì†Œë¹„í•´ì£¼ì„¸ìš”")
                }
              }
            }
          }
        }
      }
      
      // ë§ˆì§€ë§‰ êµ¬ë§¤ ê°€ê²© (ìˆì„ ê²½ìš°)
      if (exists(this.lastPrice)) {
        section {
          title ("ë§ˆì§€ë§‰ êµ¬ë§¤ ì •ë³´")
          content {
            cell-card {
              slot1 {
                image {
                  url ("/images/price_icon.png")
                  shape (Circle)
                }
              }
              slot2 {
                content {
                  order (PrimarySecondary)
                  primary ("êµ¬ë§¤ ê°€ê²©")
                  secondary ("#{value(this.lastPrice)}ì›")
                }
              }
            }
          }
        }
      }
      
      // ë³´ê´€ ìœ„ì¹˜ (ìˆì„ ê²½ìš°)
      if (exists(this.location)) {
        section {
          title ("ë³´ê´€ ìœ„ì¹˜")
          content {
            single-line {
              text {
                value ("ğŸ“ #{value(this.location)}")
                style (Detail_L)
              }
            }
          }
        }
      }
    }
  }
  
  // í›„ì† ì•¡ì…˜ ë²„íŠ¼
  conversation-drivers {
    // ì¬ê³ ê°€ ìˆìœ¼ë©´ ì‚¬ìš© ì˜µì…˜ ì œê³µ
    if (this.currentStock > 0) {
      // ì»¨í…ìŠ¤íŠ¸ ì˜ì¡´ë„ë¥¼ ë‚®ì¶”ê¸° ìœ„í•´ ìƒí’ˆëª…ì„ í¬í•¨í•œ ë°œí™”ë¥¼ ì œì•ˆ
      conversation-driver {
        template ("#{value(this.productName)} ì „ëŸ‰ ì‚¬ìš©")
      }
      conversation-driver {
        template ("#{value(this.productName)} ë‹¤ ì¼ì–´")
      }
      conversation-driver {
        template ("ì‚¬ìš©í–ˆì–´")
      }
      conversation-driver {
        template ("ì „ëŸ‰ ì‚¬ìš©")
      }
    }
    
    // ì¬ê³ ê°€ ì—†ê±°ë‚˜ ì ìœ¼ë©´ ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€
    if (this.currentStock <= 1) {
      conversation-driver {
        template ("ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€")
      }
    }
  }
}
